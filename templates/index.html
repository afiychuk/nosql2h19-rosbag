<!doctype html>
<!-- Lib files -->
<link rel="stylesheet" href="https://cdn.webix.com/edge/webix.css" type="text/css">
<script src="https://cdn.webix.com/edge/webix.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- App files -->
<script src="../static/topicsTable.js" type="text/javascript"></script>
<script src="static/logic.js" type="text/javascript"></script>
<script src="../static/header.js" type="text/javascript"></script>
<script src="../static/menu.js" type="text/javascript"></script>
<script src="../static/mainTable.js" type="text/javascript"></script>
<script src="../static/windowUpload.js" type="text/javascript"></script>
<script src="../static/windowFilterDate.js" type="text/javascript"></script>


<title>Hello from Flask</title>
<body>
<script type="text/javascript" charset="utf-8">
    function updateMainTable(tableID, requestString, requestData){
        console.log("update!")
        $$(tableID).clearAll()
        // webix.alert("update data!")
        // return webix.promise(function(res) {
        webix.ajax(requestString, requestData, function(result) {
            result = JSON.parse(result)
            console.log(result);
            let i = 0
            for (var key in result) {
                console.log(key)
                $$(tableID).parse([{
                    id: i,
                    filename: result[key]["filename"],
                    creation: result[key]["date_creation"],
                    topics: result[key]["topics_list"],
                    duration: result[key]["duration"]
                }])
                i++
            }
        });
        // });
    }
    webix.i18n.setLocale("ru-RU");
    webix.ready(function() {
        webix.ui(TopicsTable)
        webix.ui(WindowUpload)
        webix.ui(WindowFilterDate)
        grida = webix.ui({
            "rows": [Header, {
                "type": "wide",
                "cols": [Menu, MainTable]
            }]
        });
    })
</script>
</body>